<!DOCTYPE html>
<html lang="en" style="min-height: 100%; height: 100%;">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        td {
            padding: 5px;
        }
    </style>
</head>
<body>
    <form>
        <input id="date" type="date" name="">

        <input id="renderInp" type="text" name="">
        <input id="butt" type="button" name="">
    </form>
    <table border="1">
            <thead>
                <tr>
                    <td>#</td>
                    <td>Найменування:</td>
                    <td>Гривень за одиницю:</td>
                    <td>Скорочення:</td>
                    <td>Дата зміни:</td>
                </tr>
            </thead>
            <tbody>

            </tbody>
        </table>
    <script
            src="https://code.jquery.com/jquery-3.4.1.min.js"
            integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
            crossorigin="anonymous"></script>
    <script type="text/javascript">


        butt.onclick = function(){
            var date = document.querySelector('#date').value;
            console.log(date);
            var date2 = date.replace(/-/g, '');
            console.log(date2);
            var url1 = 'https://bank.gov.ua/NBUStatService/v1/statdirectory/exchange?date=date3&json'

            var url2 = url1.replace(/date3/g, date2);

            console.log(url2);

$.ajax({



    url: url2,
    method: 'GET',
    error: (e) => {
        console.log(e);
    },
    success: (data) => {
        console.log(data);
        let htmlStr = ``;
        var Inp = document.querySelector('#renderInp').value;
            console.log(Inp);
            var Inp2 = Inp.length 
            console.log(Inp2);
        for(let index in data) {
        
        var Inp3 = data[index].txt;
            console.log(Inp3);
            var rendered = Inp3.substring(0, Inp2);
            console.log(rendered);
            if (rendered === Inp) {
            var indRend = data.indexOf(this.Inp3);
            console.log(indRend)
                console.log("HI");
                $.ajax({
    url: "https://bank.gov.ua/NBUStatService/v1/statdirectory/exchange?date=20190929&json",
    method: 'GET',
    error: (e) => {
        console.log(e);
    },
    success: (data) => {
        console.log(data);
        let htmlStr = ``;
        for(let index in data) {
        htmlStr += `<tr>
             <td>${index}</td>
            <td>${data[index].txt}</td>
            <td>${data[index].rate}</td>
            <td>${data[index].cc}</td>
            <td>${data[index].exchangedate}</td>
        </tr>`;
        var Inp3 = data[index].txt;
    }
    document.querySelector('tbody').innerHTML = htmlStr;
           }
});
            }
    }
           }



});
    
        

        var renderInp = function(){
            var Inp = document.querySelector('#renderInp').value;
            console.log(Inp);
        }

        }

    



        
    </script>
</body>
</html>
